---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import BlogFilter from '../../../components/blog/BlogFilter.svelte';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const posts = allPosts
  .filter((p) => p.data.lang === 'en' && !p.data.draft)
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());

const categories = [
  { value: 'tutorial', label: 'Tutorials' },
  { value: 'case-study', label: 'Case Studies' },
  { value: 'opinion', label: 'Opinions' },
  { value: 'project', label: 'Projects' },
];
---

<BaseLayout
  title="Blog"
  description="Articles about web development, technology, automation, and real projects."
>
  <section class="px-4 py-16 sm:px-6 sm:py-20 lg:px-8">
    <div class="mx-auto max-w-7xl">
      <h1 class="font-display text-4xl font-bold sm:text-5xl">Blog</h1>
      <p class="mt-3 text-lg text-text-secondary">
        Articles about development, technology, and projects
      </p>

      <div class="mt-10">
        <BlogFilter
          client:load
          posts={posts}
          lang="en"
          categories={categories}
          noPostsMessage="No articles in this category yet."
          readMoreLabel="Read more"
          blogBasePath="/en/blog/"
        />
      </div>
    </div>
  </section>
</BaseLayout>
