---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProjectFilter from '../../../components/portfolio/ProjectFilter.svelte';
import { getCollection } from 'astro:content';

const allProjects = await getCollection('projects');
const projects = allProjects
  .filter((p) => p.data.lang === 'es')
  .sort((a, b) => a.data.order - b.data.order);

const categories = [
  { value: 'web', label: 'Web' },
  { value: 'mobile', label: 'Móvil' },
  { value: 'system', label: 'Sistemas' },
  { value: 'integration', label: 'Integración' },
  { value: 'game', label: 'Videojuegos' },
  { value: 'devops', label: 'DevOps' },
];
---

<BaseLayout
  title="Proyectos"
  description="Portafolio de proyectos: aplicaciones web, móviles, sistemas empresariales, videojuegos, APIs y más."
  keywords="portafolio desarrollador, proyectos software, desarrollo web mexico"
>
  <section class="px-4 py-16 sm:px-6 sm:py-20 lg:px-8">
    <div class="mx-auto max-w-7xl">
      <h1 class="font-display text-4xl font-bold sm:text-5xl">Proyectos</h1>
      <p class="mt-3 text-lg text-text-secondary">
        Una selección de proyectos en los que he trabajado — desde apps móviles hasta infraestructura cloud.
      </p>

      <div class="mt-10">
        <ProjectFilter
          client:load
          projects={projects}
          lang="es"
          categories={categories}
          basePath="/es/proyectos/"
        />
      </div>
    </div>
  </section>
</BaseLayout>
